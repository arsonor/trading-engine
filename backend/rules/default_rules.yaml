# Default Trading Rules Configuration
# This file defines the detection rules for generating trading alerts

rules:
  - name: "breakout_setup"
    description: "Price breakout above resistance with volume confirmation"
    type: "price"
    enabled: true
    priority: 20
    conditions:
      - field: "price"
        operator: ">"
        value: "resistance_level"
      - field: "volume_ratio"
        operator: ">"
        value: 1.5
    filters:
      min_price: 10.0
      max_price: 500.0
      min_volume: 100000
    targets:
      stop_loss_percent: -3.0
      target_percent: 6.0
    confidence:
      base_score: 0.75
      modifiers:
        - condition: "volume_ratio > 2.0"
          adjustment: 0.1
        - condition: "price > pre_market_high"
          adjustment: 0.05

  - name: "volume_spike"
    description: "Alert when volume spikes above average with price movement"
    type: "volume"
    enabled: true
    priority: 15
    conditions:
      - field: "volume_ratio"
        operator: ">"
        value: 2.0
      - field: "price_change_percent"
        operator: ">"
        value: 1.0
    filters:
      min_price: 5.0
      max_price: 500.0
      min_volume: 100000
    targets:
      stop_loss_percent: -3.0
      target_percent: 5.0
    confidence:
      base_score: 0.70
      modifiers:
        - condition: "volume_ratio > 3.0"
          adjustment: 0.1

  - name: "gap_up"
    description: "Pre-market gap up detection"
    type: "gap"
    enabled: true
    priority: 18
    conditions:
      - field: "gap_percent"
        operator: ">"
        value: 3.0
      - field: "pre_market_volume"
        operator: ">"
        value: 50000
    time_window:
      start: "04:00"
      end: "09:30"
    filters:
      min_price: 5.0
      max_price: 300.0
    targets:
      stop_loss_percent: -2.0
      target_percent: 4.0
    confidence:
      base_score: 0.72

  - name: "low_float_momentum"
    description: "Low float stock with momentum"
    type: "technical"
    enabled: true
    priority: 25
    conditions:
      - field: "float_shares"
        operator: "<"
        value: 20000000
      - field: "volume_ratio"
        operator: ">"
        value: 2.0
      - field: "price_change_percent"
        operator: ">"
        value: 5.0
    filters:
      min_price: 2.0
      max_price: 50.0
    targets:
      stop_loss_percent: -5.0
      target_percent: 10.0
    confidence:
      base_score: 0.80
      modifiers:
        - condition: "float_shares < 10000000"
          adjustment: 0.1
        - condition: "short_interest > 0.2"
          adjustment: 0.05

  - name: "sma_breakout"
    description: "Price breaks above 20-day SMA with volume"
    type: "technical"
    enabled: true
    priority: 10
    conditions:
      - field: "price"
        operator: ">"
        value: "sma_20"
      - field: "prev_close"
        operator: "<"
        value: "sma_20"
      - field: "volume_ratio"
        operator: ">"
        value: 1.2
    lookback_periods:
      sma: 20
    filters:
      min_price: 10.0
    targets:
      stop_loss_atr_multiplier: 2.0
      target_rr_ratio: 2.0
    confidence:
      base_score: 0.65
